<!DOCTYPE html>
<head>
    <title>Smartphone Products</title>
    <p style="text-align: center; font-weight: bold;">
        Hits:<span id="hits_span">0</span>
        Spins:<span id="spins_span">0</span>
        Hit/Spin:<span id="hit_spin_span">0</span><BR>
        You win:<span id="win_span">pending...</span>
    </p>
    <link rel="stylesheet" type="text/css" href="products-style2.css">
    <script>
        const store_name="Sal";
        let hits= 0;
        let spins=0;
        let over_half=false;
    </script>
</head>
<body onload="hits_span.innerHTML = hits; spins_span.innerHTML = spins; win_span.innerHTML=over_half;">
    
    <h1>
        <Script>
            document.write(store_name + "'s Used Smart Phone Store");
        </Script>
        
        </h1>
    <div>
        <main class="main">
            <section class="item" onmouseover="changeClassName(this); " onclick="resetClassName(this);" >
                <h2>HTC</h2>
                <p>&dollar;40</p>
                <img src="images/HTC.jpg" />
            </section>
            <section class="item" onmouseover="changeClassName(this);" onclick="resetClassName(this);">
                <h2>Apple</h2>
                <p>&dollar;75</p>
                <img src="http://dport96.github.io/ITM352/morea/080.flow-control-II/iphone-3gs.jpg" />
            </section>
            <section class="item" onmouseover="changeClassName(this)" onclick="resetClassName(this)">
                <h2>Nokia</h2>
                <p>&dollar;35</p>
                <img src="http://dport96.github.io/ITM352/morea/080.flow-control-II/Nokia.jpg" />
            </section>
            <section class="item" onmouseover="changeClassName(this)" onclick="resetClassName(this)">
                <h2>Samsung</h2>
                <p>&dollar;45</p>
                <img src="http://dport96.github.io/ITM352/morea/080.flow-control-II/Samsung.jpg" />
            </section>
            <section class="item" onmouseover="changeClassName(this)" onclick="resetClassName(this)">
                <h2>Blackberry</h2>
                <p>&dollar;10</p>
                <img src="http://dport96.github.io/ITM352/morea/080.flow-control-II/Blackberry.jpg" />
            </section>
        </main>
    </div>
    <script>
        function changeClassName(element) {
            //change  the item class name to item rotate to allow the 
            //css code to rotate the image
            element.className = 'item rotate';
            //increment spins on every mousover event
            spins_span.innerHTML = spins++; 
            //send the number of hits / spins to the webpage
            hit_spin_span.innerHTML=Number(hits/spins).toFixed(2);

            if (spins<(2*hits)&&hits>spins){
            //win_span.innerHTML=true;
            over_half=true;
            win_span.innerHTML=over_half;
            }
            else {
            //win_span.innerHTML=false;
            win_span.innerHTML=over_half;
            }
        }
        function resetClassName(element) {
            if (element.className=='item rotate') {
                hits=hits+=2;
                element.className = 'item';
            }
            else {
                element.className = 'item';
            }
            //element.className = 'item';
            //hits=hits+=2;
            hits_span.innerHTML = hits; 
            hit_spin_span.innerHTML=Number(hits/spins).toFixed(2);
            if (spins<(2*hits)&&hits>spins){
            //win_span.innerHTML=true;
            over_half=true;
            win_span.innerHTML=over_half;
            }
            else {
            //win_span.innerHTML=false;
            win_span.innerHTML=over_half;
            }
            /*
            // -- Winning progress depends on hits/spins
            let hits_spins_ratio = hits / spins;
            if (hits_spins_ratio > 0) {
                progress = 'On your way!';
                if (hits_spins_ratio >= 0.25) {
                    progress = 'Almost there!';
                    if (hits_spins_ratio >= 0.5) {
                        if (hits < spins) {
                            progress = 'You win!';
                        }
                    }
                }
            } else {
                progress = 'Get going!';
            }
            */
           // -- Winning progress depends on hits/spins
            let hits_spins_ratio = hits/spins;
            if (hits_spins_ratio >= 0.5&& (hits<spins)) {
                progress = 'You win!';
            } else if(hits_spins_ratio >= 0.25){
            progress = 'On your way!';
            } else if (hits_spins_ratio > 0) {
            progress = 'Almost there!';
            } else {
                progress = 'Get going!';
            }
            // Set the win_span with the progress message
            win_span.innerHTML = progress;
        }
        hits_span.innerHTML = hits; 
        spins_span.innerHTML = spins;
    </script>
</body>
<footer>
    <h1>
        <script>
            document.write("Your one stop shop for used phones - "+store_name+"'s");            
        </script>
    </h1>
</footer>
</html>